<!DOCTYPE html>  
<html lang="bn">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <title>Prescription Pro</title>  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>  
    <link href="https://fonts.cdnfonts.com/css/solaimanlipi" rel="stylesheet">  
    <style>  
        body { font-family: 'SolaimanLipi', Arial, sans-serif; background: #f4f7f6; padding: 20px; }  
        #input-page { max-width: 600px; margin: 0 auto; background: white; padding: 25px; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }  
        .input-group { margin-bottom: 15px; }  
        input, textarea { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; font-family: 'SolaimanLipi'; font-size: 16px; }  
        .btn-gen { width: 100%; background: #27ae60; color: white; padding: 15px; border: none; border-radius: 6px; cursor: pointer; font-size: 18px; }  

        #prescription-wrapper { display: none; text-align: center; }  
        #prescription-card {   
            width: 794px; height: 1123px; background: white; margin: 0 auto;   
            position: relative; border: 1px solid #ccc; overflow: hidden; text-align: left;  
            display: flex; flex-direction: column; 
        }  

        .blue-header { background: #56CCF2; color: white; text-align: center; padding: 8px; font-weight: bold; font-size: 18px; }  
        .doc-header { display: flex; justify-content: space-between; padding: 20px 40px; line-height: 1.3; }  
        .doc-header .name-bn, .doc-header .name-en { font-size: 26px; color: #004d40; font-weight: bold; }
        .red-text { color: brown; font-weight: bold; }

        .patient-bar { display: flex; justify-content: space-between; padding: 8px 40px; border-top: 2px solid #000; border-bottom: 2px solid #000; font-weight: bold; }  

        .main-content { display: flex; flex: 1; }  
        .left-col { width: 32%; border-right: 2px solid #000; padding: 20px; }  
        .right-col { width: 68%; padding: 20px 40px; display: flex; flex-direction: column; position: relative; }  
        .rx-title { font-size: 40px; font-weight: bold; font-family: serif; margin-bottom: 5px; }  
        .medication-content { padding-left: 35px; font-size: 18px; line-height: 1.8; white-space: pre-line; }  

        .signature-container { margin-top: 30px; text-align: right; padding-right: 20px; }  
        #out_sign { max-width: 150px; height: auto; display: none; margin-left: auto; }

        .footer-black {   
            width: 100%; height: 80px; /* উচ্চতা কিছুটা কমানো হয়েছে */
            background: black; color: white; text-align: center;  
            display: flex; flex-direction: column; justify-content: center;  
            border-top-left-radius: 50% 30px; border-top-right-radius: 50% 30px;  
            font-size: 18px; font-weight: bold;
            margin-top: auto; 
        }  

        .actions { margin-top: 20px; display: flex; justify-content: center; gap: 15px; padding-bottom: 40px; }  
    </style>
</head>  
<body>  

<div id="input-page">  
    <h2 style="text-align:center">Prescription Entry</h2>  
    <div class="input-group"><label>রোগীর নাম:</label><input type="text" id="in_name"></div>  
    <div style="display:flex; gap:10px">  
        <div class="input-group" style="flex:1"><label>বয়স:</label><input type="text" id="in_age"></div>  
        <div class="input-group" style="flex:1"><label>তারিখ (EN):</label><input type="text" id="in_date"></div>  
    </div>  
    <div class="input-group"><label>C/C:</label><textarea id="in_cc" rows="2"></textarea></div>  
    <div class="input-group"><label>O/E:</label><textarea id="in_oe" rows="2"></textarea></div>  
    <div class="input-group"><label>Adv:</label><textarea id="in_adv" rows="2"></textarea></div>  
    <div class="input-group"><label>ঔষধ (Rx):</label><textarea id="in_med" rows="6"></textarea></div>  
    <div class="input-group">
        <label>স্বাক্ষর আপলোড (একবার করলেই হবে):</label>
        <input type="file" id="in_sign" accept="image/*">
    </div>  
    <button class="btn-gen" onclick="generate()">জেনারেট প্রেসক্রিপশন</button>  
</div>  

<div id="prescription-wrapper">  
    <div id="prescription-card">  
        <div class="blue-header">মেডিসিন, বাত ব্যথা, চর্ম, মা ও শিশু রোগ অভিজ্ঞ।</div>  
        <div class="doc-header">  
            <div>
                <span class="name-bn">ডাঃ মোঃ আতিকুর রহমান</span><br>
                ডি.এম.এফ (ঢাকা)<br>
                <span class="red-text">জেনারেল ফিজিশিয়ান</span><br>
                রেজিঃ নং ডি-১৮৯৫০<br>
                মোবাইল: ০১৩২১-৯৩০০৯৪
            </div>  
            <div style="text-align:right">
                <span class="name-en">Dr. Md. Atikur Rahman</span><br>
                D.M.F (Dhaka)<br>
                <span class="red-text">General Physician</span><br>
                Reg: D-18950<br>
                Mobile: 01321-930094
            </div>  
        </div>  

        <div class="patient-bar">  
            <span>নাম: <span id="out_name"></span></span>  
            <span>বয়স: <span id="out_age"></span></span>  
            <span>তারিখ: <span id="out_date"></span></span>  
        </div>  

        <div class="main-content">  
            <div class="left-col">  
                <strong>C/C :</strong><div id="out_cc"></div><br>  
                <strong>O/E :</strong><div id="out_oe"></div><br>  
                <strong>Adv :</strong><div id="out_adv"></div>  
            </div>  
            <div class="right-col">  
                <div class="rx-title">Rx</div>  
                <div class="medication-content" id="out_med"></div>  
                <div class="signature-container">  
                    <img id="out_sign" src="">  
                </div>  
            </div>  
        </div>  

        <div class="footer-black">  
            পরবর্তী সাক্ষাতে প্রেসক্রিপশন সাথে আনবেন।
        </div>  
    </div>  

    <div class="actions">  
        <button style="background:#2980b9; color:white; padding:10px 20px; border:none; border-radius:5px; cursor:pointer;" onclick="download()">ডাউনলোড JPG</button>  
        <button style="background:#e67e22; color:white; padding:10px 20px; border:none; border-radius:5px; cursor:pointer;" onclick="location.reload()">নতুন প্রেসক্রিপশন</button>  
    </div>  
</div>  

<script>  
    document.getElementById('in_date').value = new Date().toLocaleDateString('en-GB');  
  
    window.onload = () => {
        const savedSign = localStorage.getItem('doctorSignature');
        if (savedSign) {
            const outSignImg = document.getElementById('out_sign');
            outSignImg.src = savedSign;
            outSignImg.style.display = 'block';
        }
    };

    const signInput = document.getElementById('in_sign');  
    signInput.onchange = e => {  
        const reader = new FileReader();  
        reader.onload = () => {  
            const base64Image = reader.result;
            localStorage.setItem('doctorSignature', base64Image); 
            const outSignImg = document.getElementById('out_sign');
            outSignImg.src = base64Image;
            outSignImg.style.display = 'block';
        };  
        reader.readAsDataURL(e.target.files[0]);  
    };  
  
    function generate() {  
        document.getElementById('out_name').innerText = document.getElementById('in_name').value;  
        document.getElementById('out_age').innerText = document.getElementById('in_age').value;  
        document.getElementById('out_date').innerText = document.getElementById('in_date').value;  
        document.getElementById('out_cc').innerText = document.getElementById('in_cc').value;  
        document.getElementById('out_oe').innerText = document.getElementById('in_oe').value;  
        document.getElementById('out_adv').innerText = document.getElementById('in_adv').value;  
        document.getElementById('out_med').innerText = document.getElementById('in_med').value;  
  
        document.getElementById('input-page').style.display = 'none';  
        document.getElementById('prescription-wrapper').style.display = 'block';  
    }  
  
    function download() {  
        html2canvas(document.getElementById('prescription-card'), {scale: 3}).then(canvas => {  
            const link = document.createElement('a');  
            link.download = 'Prescription.jpg';  
            link.href = canvas.toDataURL("image/jpeg");  
            link.click();  
        });  
    }  
</script>  
</body>  
</html>